# AI Data Analyst Chatbot for E-Commerce Analytics

A production-grade AI Data Analyst Chatbot workflow for n8n, leveraging Nebius AI Studio's DeepSeek-V3-0324-fast LLM for advanced, structured data analysis and Google Workspace automation.

This repository demonstrates a generic e-commerce analytics agent use case‚Äîno brand-specific logic or data is included. The workflow can be adapted to any e-commerce or transactional business scenario.

![Workflow Diagram](assets/workflow-diagram.png)

---

## üõ†Ô∏è Architecture Overview

- **Workflow Orchestration:** Built in [n8n](https://n8n.io/), using modular nodes for event-driven automation and data transformation.
- **LLM Integration:** Utilizes [Nebius AI Studio](https://studio.nebius.com/) DeepSeek-V3-0324-fast for high-performance, context-aware reasoning and structured output.
- **Google Workspace Integration:** Secure OAuth2 connections to Google Sheets and Google Docs for real-time data retrieval and document updates.
- **Memory & State:** Implements buffer memory for short-term context retention (last 5 messages) to enable coherent, multi-turn conversations.
- **Structured Output Parsing:** Enforces strict JSON schema validation for LLM responses, ensuring reliable downstream automation.

---

## ‚öôÔ∏è Workflow Deep Dive

### 1. **Trigger: Chat Message Received**
- **Node:** `@n8n/n8n-nodes-langchain.chatTrigger`
- **Purpose:** Listens for incoming chat messages to initiate the workflow.

### 2. **AI Agent (Nebius DeepSeek-V3-0324-fast)**
- **Node:** `@n8n/n8n-nodes-langchain.agent`
- **Model:** `deepseek-ai/DeepSeek-V3-0324-fast`
- **Prompt Engineering:** System message enforces explicit JSON output:
  ```json
  {
    "reply": "Text response to user",
    "doc_update": "Content to update Google Doc"
  }
  ```
- **Features:**
  - Structured output for downstream automation
  - Contextual reasoning with access to Google Sheets/Docs tools
  - Max 15 iterations per query for robust multi-step reasoning

### 3. **Google Sheets Tools**
- **Nodes:**
  - `Get transactions by status`
  - `Get transactions by product name`
  - `Get all transactions`
- **Integration:** OAuth2 credentials, dynamic filters via `$fromAI` for product/status extraction, and custom HTTP for advanced queries.
- **Data Transformation:** Post-processing with custom code to normalize and aggregate results for the LLM.

### 4. **Google Docs Automation**
- **Node:** `Document Strategy`
- **Purpose:** Updates a Google Doc with strategic insights or summaries generated by the LLM.
- **Integration:** OAuth2 credentials, document URL parameterization.

### 5. **Buffer Memory**
- **Node:** `@n8n/n8n-nodes-langchain.memoryBufferWindow`
- **Purpose:** Maintains short-term conversational context for up to 5 previous interactions.

### 6. **Structured Output Parser**
- **Node:** `@n8n/n8n-nodes-langchain.outputParserStructured`
- **Purpose:** Enforces strict schema validation on LLM output, auto-fixes minor format issues, and guarantees JSON compliance.

### 7. **Decision & Routing Logic**
- **Nodes:** `If`, `If1`, `If2`, `Merge`, `Set`
- **Purpose:** Implements guard clauses, conditional routing, and data assignment for robust, error-tolerant automation.

---

## üß© Example Use Cases
- Automated financial and sales analysis for e-commerce
- Real-time lead generation and outreach
- Instant database chatbots for internal knowledge
- Competitive intelligence with live document updates

---

## üßë‚Äçüíª Model & Security Details
- **Model:** Nebius DeepSeek-V3-0324-fast (Open-source, EU-hosted, zero data retention)
- **Security:**
  - All API credentials managed via n8n's encrypted credential store
  - OAuth2 for Google integrations
  - No data is stored or logged outside your infrastructure
- **Performance:**
  - Hosted on NVIDIA GPUs for low-latency inference
  - Cost-effective, scalable, and GDPR-compliant

---

## üöÄ Quick Start
1. Import `Nike AI Data Analyst Chatbot FINAL.json` into n8n.
2. Configure Nebius and Google credentials as described in [Cookbook.md](./Cookbook.md).
3. Replace the Google Sheets/Docs URLs with your own.
4. Activate the workflow and interact via the n8n chat interface or webhook.

---

## üìö Resources
- [Nebius AI Studio](https://studio.nebius.com/)
- [n8n Documentation](https://docs.n8n.io/)
- [Google OAuth n8n Setup Guide](https://docs.n8n.io/integrations/builtin/credentials/Google/)

---

Contributions welcome! 