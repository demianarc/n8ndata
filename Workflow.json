{
  "name": "WORD TEST Nike AI Data Analyst Chatbot",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "initialMessages": "Hi there! ðŸ‘‹\nMy name is Dylan, Data analyst for Nike. How can I assist you today?",
        "options": {}
      },
      "id": "2663add6-710a-4b12-9be4-3a6d12a13996",
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "position": [
        -1060,
        200
      ],
      "webhookId": "16ef58aa-3eea-4a2c-8d5d-3acef140a6d4",
      "typeVersion": 1.1,
      "notes": "How many refunds in January and what was the amount refunded?"
    },
    {
      "parameters": {
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=You are a helpful assistant.\nCurrent timestamp is {{$now}}\nWhen responding, explicitly structure your response as plain JSON in the following format, without any markdown or code formatting:\n\n{\n\"reply\": \"Your reply to the chat goes here\",\n\"doc_update\": \"Your content to insert into the document goes here\"\n}\n\nDo NOT wrap the output in markdown or code fences.\nIf one of these actions is not needed, use an empty string (\"\").\n",
          "maxIterations": 15
        }
      },
      "id": "57d6be44-59dc-4ba8-bb60-fdaaacf0c89d",
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        -580,
        200
      ],
      "typeVersion": 1.7
    },
    {
      "parameters": {},
      "id": "9d0bdf68-6543-4326-81f7-f9647095cb60",
      "name": "Calculator",
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "position": [
        -100,
        860
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "To send all the items back to the AI, we need to finish with everything aggregated into one single item.\n\nOtherwise it will respond with one item at a time, and the AI will only get the first item that arrives.",
        "height": 400,
        "width": 220,
        "color": 7
      },
      "id": "3400dcec-ca7a-46c7-bc97-694330b841b2",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        600,
        1600
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "This node sends a custom HTTP Request to the Google Sheets API.\n\nFiltering by date range in the Google Sheets API is very complicated.\n\nThis node solves that problem.\n\nBut doing the same in a database is much simpler. A tool could do it without needing a sub-workflow.",
        "height": 400,
        "width": 300,
        "color": 7
      },
      "id": "225a35e7-9eb6-4978-8104-cbd7e1e05d03",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -160,
        1600
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "The output from this complex request is also messy.\n\nSo we use some code generated by ChatGPT to transform the data into JSON objects.",
        "height": 400,
        "width": 220,
        "color": 7
      },
      "id": "5650f323-cf5e-4c8b-8002-a71c8d402e60",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        160,
        1600
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Find transactions by product.\nOur products are:\n\nAir Jordan 1 Retro High OG\n\nNike Mercurial Vapor 15 Elite FG\n\nNike NBA Lakers Swingman Jersey\n\nNike Air Force 1 '07\n\nNike Sportswear Tech Fleece Hoodie\n\nNike Dri-FIT ADV Soccer Jersey\n\nNike Phantom GX Elite Soccer Cleats\n\nAir Jordan 4 Retro\n\nNike Dunk Low\n\nNike Zoom Pegasus 40",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1JA9XE_ikbAVyuQEeiYf6GwTtRcyIaIAABuJbeIaJtN4/edit?usp=sharing",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit#gid=0",
          "cachedResultName": "Sheet1"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Product",
              "lookupValue": "={{ $fromAI(\"product_name\", \"The product name\", \"string\") }}"
            }
          ]
        },
        "options": {}
      },
      "id": "6294d42c-6fc5-4b54-8d62-eea7e15d444f",
      "name": "Get transactions by product name",
      "type": "n8n-nodes-base.googleSheetsTool",
      "position": [
        80,
        480
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "LIMdx6tfnUpOqUxm",
          "name": "Google Sheets account"
        }
      }
    }
  ]
} 